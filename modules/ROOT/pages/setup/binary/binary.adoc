== Lisk Core Binary Setup

* link:#pre-install[Pre-Install]
[arabic]
. link:#determine-if-your-platform-can-run-lisk-core[Determine if your
platform can run Lisk Core]
. link:#open-the-necessary-ports[Open necessary ports]
. link:#install-dependencies[Install dependencies]
. link:#create-a-user-to-run-lisk[Create `+lisk+` user]
* link:#installation[Installation]
[arabic]
. link:#login-to-the-lisk-user[Login as lisk user]
. link:#execute-the-installation-script[Execute the installation script]
. link:#verify-successful-installation[Verify successful installation]
* link:#post-installation-optional[Post-Installation (optional)]
** link:#logrotate-setup[Logrotate Setup]

=== Pre-Install

This document will detail how to prepare a system for the installation
of Lisk Core. It will guide you through the installation of important
dependencies, as well as user creation.

==== Determine if your platform can run Lisk Core

===== Supported Platforms

* Ubuntu 18.04 x86_64
* Ubuntu 16.04 (LTS) x86_64

To complete the installation there are prerequisites that need to be
fulfilled. If you have already performed these, please proceed to the
link:#installation[Installation] chapter. Please follow the instructions
below to load the required software to your system.

==== Open the necessary ports

In order to connect to the desired network with Lisk Core , please
ensure that the corresponding ports are open:

[cols=",,",options="header",]
|===
|Network |httpPort(HTTP) |wsPort(TCP)
|Mainnet |8000 |8001
|Testnet |7000 |7001
|Betanet |5000 |5001
|Devnet |4000 |5000
|===

These are the default ports for connecting with the network, they can be
altered later in
https://github.com/LiskHQ/lisk/blob/development/config.json#L2[`+config.json+`].

==== Install dependencies

[source,bash]
----
sudo apt-get update
sudo apt-get install curl wget tar unzip zip ntp
----

==== Create a user to run Lisk

[width="100%",cols="50%,50%",options="header",]
|===
|Info |Note
|image:../../modules/ROOT/assets/info-icon.png[info
note,title="Info Note"] |The `+lisk+` user itself *does not need* any
`+sudo+` rights to run Lisk Core.
|===

[source,bash]
----
sudo adduser lisk
----

=== Installation

This section details how to install Lisk Core using pre-built binary
packages. Once completed, you will have a functioning node on the Lisk
Network. If you are looking to upgrade your current Lisk Core
installation, please see the
link:../../upgrade/binary/upgrade-binary.md[Upgrade Binary] section.

==== Login to the Lisk user

The user was created in the link:#pre-install[Binary - Prerequisites
Section]. If you are already logged in to this user, please skip this
step.

[source,bash]
----
su - lisk
----

==== Execute the installation script

This will configure the environment, download and install Lisk Core.
Before proceeding, determine whether you wish to connect your node to
the Testnet (Test Network) or the Mainnet (Main Network).

===== Mainnet

Download Lisk Core:

[source,bash]
----
wget https://downloads.lisk.io/lisk/main/installLisk.sh
----

To connect your node to the Mainnet, run:

[source,bash]
----
bash installLisk.sh install -r main
----

===== Testnet

Download Lisk Core:

[source,bash]
----
wget https://downloads.lisk.io/lisk/test/installLisk.sh
----

To connect your node to the Testnet, run:

[source,shell]
----
bash installLisk.sh install -r test
----

You will be prompted for your installation directory, pressing enter
will choose the default.

Next you will be prompted, if you wish to synchronize from the Genesis
block. If you answer `no', which is the default option, the node will
download a recent snapshot of the database. This will be much faster
than synching from the genesis block.

The installation may take a few minutes. Check the scripts output to
verify that the installation was successful.

If you recognise an error, try to resolve it by analysing the error
output, otherwise you can have a look at our
link:../../../troubleshooting/troubleshooting.md[Troubleshooting
Section].

==== Verify successful installation

When the installation script has finished, navigate inside of the newly
created folder `+lisk-main+`(for Mainnet) or `+lisk-test+`(for Testnet).
You can verify that your Lisk node is up and running, by running the
following command:

[source,bash]
----
bash lisk.sh status
----

For further information and how to administer your Lisk node, please
have a look at our
link:../../../user-guide/administration/binary/admin-binary.md[Administration
Section].

If you are not running Lisk locally, you will need to follow the
link:../../../user-guide/configuration/configuration.md#api-access-control[Configuration
- API] document to enable access.

With all of the above steps complete you are ready to move on to the
configuration documentation if you wish to enable forging or SSL, please
see link:../../../user-guide/configuration/configuration.md[General
Configuration].

=== Post-installation (optional)

==== Logrotate Setup

It is recommended to setup a log rotation for the logfile of Lisk Core.

===== Ubuntu

Ubuntu systems provide a service called `+logrotate+` for this purpose.
First make sure Logrotate is installed on your system:

[source,bash]
----
logrotate --version
----

Next, create a new file called `+lisk+` in the logrotate directory
`+/etc/logrotate.d+`:

[source,bash]
----
cd /etc/logrotate.d
touch lisk
----

Inside of this file, define the parameters for the log rotation.

Example values:

[source,bash]
----
/path/to/lisk/logs/*.log { 
        daily                   # daily rotation
        rotate 5                # keep the 5 most recent logs
        maxage 14               # remove logs that are older than 14 days
        compress                # compress old log files
        delaycompress           # compress the data, after it has been moved
        missingok               # if no logfile is present, ignore
        notifempty              # do not rotate empty log files
}
----

After customizing the config to fit your needs and saving it, you can
test it by doing a dry run:

[source,bash]
----
sudo logrotate /etc/logrotate.conf --debug
----
